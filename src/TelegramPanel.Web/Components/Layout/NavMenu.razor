@inject TelegramPanel.Web.Modules.ModuleContributionRegistry Contributions

<MudNavMenu>
    <MudNavLink Href="/" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.Dashboard">
        仪表盘
    </MudNavLink>

    <MudNavGroup Title="账号管理" Icon="@Icons.Material.Filled.AccountCircle" Expanded="true">
        <MudNavLink Href="/accounts" Icon="@Icons.Material.Filled.People">账号列表</MudNavLink>
        <MudNavLink Href="/accounts/import" Icon="@Icons.Material.Filled.Upload">导入账号</MudNavLink>
        <MudNavLink Href="/accounts/login" Icon="@Icons.Material.Filled.Login">手机号登录</MudNavLink>
        <MudNavLink Href="/accounts/categories" Icon="@Icons.Material.Filled.Category">账号分类</MudNavLink>
    </MudNavGroup>

    <MudNavGroup Title="频道管理" Icon="@Icons.Material.Filled.Campaign" Expanded="true">
        <MudNavLink Href="/channels" Icon="@Icons.Material.Filled.List">频道列表</MudNavLink>
        <MudNavLink Href="/channels/create" Icon="@Icons.Material.Filled.Add">创建频道</MudNavLink>
        <MudNavLink Href="/channels/groups" Icon="@Icons.Material.Filled.Folder">频道分组</MudNavLink>
    </MudNavGroup>

    <MudNavGroup Title="群组管理" Icon="@Icons.Material.Filled.Group">
        <MudNavLink Href="/groups" Icon="@Icons.Material.Filled.List">群组列表</MudNavLink>
    </MudNavGroup>

    <MudNavGroup Title="机器人管理" Icon="@Icons.Material.Filled.SmartToy">
        <MudNavLink Href="/bots" Icon="@Icons.Material.Filled.SmartToy">机器人列表</MudNavLink>
        <MudNavLink Href="/bots/channels" Icon="@Icons.Material.Filled.List">Bot 频道</MudNavLink>
    </MudNavGroup>

    <MudNavLink Href="/tasks" Icon="@Icons.Material.Filled.Assignment">
        任务中心
    </MudNavLink>

    <MudNavLink Href="/settings" Icon="@Icons.Material.Filled.Settings">
        系统设置
    </MudNavLink>

    <MudNavLink Href="/modules" Icon="@Icons.Material.Filled.Extension">
        模块管理
    </MudNavLink>

    <MudNavLink Href="/apis" Icon="@Icons.Material.Filled.Link">
        API 管理
    </MudNavLink>

    <MudNavLink Href="/admin/password" Icon="@Icons.Material.Filled.Password">
        修改密码
    </MudNavLink>

    <MudNavLink Href="/logout" Icon="@Icons.Material.Filled.Logout">
        退出登录
    </MudNavLink>

    @if (Contributions.NavItems.Count > 0 || Contributions.Pages.Count > 0)
    {
        <MudNavGroup Title="扩展模块" Icon="@Icons.Material.Filled.Extension">
            @foreach (var item in Contributions.NavItems
                .OrderBy(x => x.Definition.Group ?? "", StringComparer.OrdinalIgnoreCase)
                .ThenBy(x => x.Definition.Order)
                .ThenBy(x => x.Definition.Title, StringComparer.OrdinalIgnoreCase))
            {
                <MudNavLink Href="@item.Definition.Href" Icon="@item.Definition.Icon">
                    @item.Definition.Title
                </MudNavLink>
            }

            @foreach (var modulePage in Contributions.Pages
                .OrderBy(x => x.Definition.Group ?? "", StringComparer.OrdinalIgnoreCase)
                .ThenBy(x => x.Definition.Order)
                .ThenBy(x => x.Definition.Title, StringComparer.OrdinalIgnoreCase))
            {
                var href = $"/ext/{modulePage.Module.Id}/{modulePage.Definition.Key}";
                <MudNavLink Href="@href" Icon="@modulePage.Definition.Icon">
                    @modulePage.Definition.Title
                </MudNavLink>
            }
        </MudNavGroup>
    }
</MudNavMenu>
